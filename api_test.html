<!DOCTYPE html>
<html>
<head>
    <title>TMDB API Test</title>
</head>
<body>
    <h1>TMDB API Capability Test</h1>
    <div id="results"></div>

    <script>
        const API_KEY = 'a07e22bc18f5cb106bfe4cc1f83ad8ed';
        const BASE_URL = 'https://api.themoviedb.org/3';

        async function testAPI() {
            const results = document.getElementById('results');
            const movieId = 238; // The Godfather

            try {
                // 1. Basic movie info
                const movieResponse = await fetch(`${BASE_URL}/movie/${movieId}?api_key=${API_KEY}&language=en-US`);
                const movieData = await movieResponse.json();

                // 2. Cast and crew
                const creditsResponse = await fetch(`${BASE_URL}/movie/${movieId}/credits?api_key=${API_KEY}`);
                const creditsData = await creditsResponse.json();

                // 3. Trailers and videos
                const videosResponse = await fetch(`${BASE_URL}/movie/${movieId}/videos?api_key=${API_KEY}`);
                const videosData = await videosResponse.json();

                // 4. Similar movies
                const similarResponse = await fetch(`${BASE_URL}/movie/${movieId}/similar?api_key=${API_KEY}`);
                const similarData = await similarResponse.json();

                // 5. Reviews
                const reviewsResponse = await fetch(`${BASE_URL}/movie/${movieId}/reviews?api_key=${API_KEY}`);
                const reviewsData = await reviewsResponse.json();

                results.innerHTML = `
                    <h2>Basic Information</h2>
                    <p><strong>Title:</strong> ${movieData.title}</p>
                    <p><strong>Runtime:</strong> ${movieData.runtime} minutes</p>
                    <p><strong>Genres:</strong> ${movieData.genres.map(g => g.name).join(', ')}</p>
                    <p><strong>Rating:</strong> ${movieData.vote_average}/10</p>

                    <h2>Main Cast (Top 5)</h2>
                    <ul>
                        ${creditsData.cast.slice(0, 5).map(actor =>
                            `<li>${actor.name} as ${actor.character}</li>`
                        ).join('')}
                    </ul>

                    <h2>Videos</h2>
                    <p>Found ${videosData.results.length} videos</p>
                    ${videosData.results.slice(0, 2).map(video =>
                        `<p>â€¢ ${video.name} (${video.site})</p>`
                    ).join('')}

                    <h2>Similar Movies (Top 5)</h2>
                    <ul>
                        ${similarData.results.slice(0, 5).map(movie =>
                            `<li>${movie.title} (${movie.vote_average}/10)</li>`
                        ).join('')}
                    </ul>

                    <h2>User Reviews</h2>
                    <p>Found ${reviewsData.results.length} reviews</p>
                    ${reviewsData.results.slice(0, 1).map(review =>
                        `<p><strong>${review.author}:</strong> ${review.content.substring(0, 200)}...</p>`
                    ).join('')}
                `;

            } catch (error) {
                results.innerHTML = `<p style="color: red;">API test failed: ${error.message}</p>`;
            }
        }

        testAPI();
    </script>
</body>
</html>